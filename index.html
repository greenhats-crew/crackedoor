<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CRACKED DOOR</title>
<style>
  :root {
    font-family: system-ui, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    --accent: #2b8cff;
    --muted: #666;
    --bg: #f6f8ff;
    --border: #e6ecff;
    --shadow: 0 8px 24px rgba(11,17,32,0.1);
  }
  body {
    margin: 32px;
    background: linear-gradient(to bottom, #f0f4ff, #ffffff);
    color: #0b1220;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .card {
    max-width: 720px;
    width: 100%;
    padding: 24px;
    border-radius: 16px;
    background: #fff;
    box-shadow: var(--shadow);
  }
  h1 {
    margin: 0 0 16px;
    font-size: 28px;
    font-weight: 600;
    color: #1a2a44;
    text-align: center;
  }
  .time-row {
    display: flex;
    gap: 24px;
    align-items: center;
    justify-content: center;
    margin-bottom: 24px;
  }
  .time-block {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    padding: 16px;
    border-radius: 12px;
    background: var(--bg);
    border: 1px solid var(--border);
    min-width: 140px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .time-block:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(11,17,32,0.1);
  }
  .label {
    font-size: 16px;
    color: var(--muted);
    margin-bottom: 10px;
    font-weight: 500;
  }
  .big {
    font-weight: 700;
    font-size: 56px;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .part {
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }
  .unit {
    padding: 10px 14px;
    border-radius: 10px;
    background: #fff;
    border: 1px solid var(--border);
    min-width: 64px;
    text-align: center;
    font-feature-settings: "tnum" 1;
    cursor: ns-resize;
    font-size: 44px;
    font-weight: 600;
    color: #1a2a44;
  }
  .controls {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  button.btn {
    border: 0;
    padding: 8px;
    border-radius: 8px;
    background: var(--accent);
    color: #fff;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s ease;
  }
  button.btn:hover {
    background: #1a73e8;
  }
  button.small {
    padding: 6px;
  }
  .calc {
    margin-top: 24px;
    padding: 16px;
    border-radius: 12px;
    background: var(--bg);
    border: 1px solid var(--border);
    text-align: center;
  }
  .result {
    font-size: 36px;
    font-weight: 700;
    color: #1a2a44;
    margin: 12px 0;
  }
  .copy {
    margin-left: 12px;
    padding: 8px 12px;
    border-radius: 8px;
    background: #e9f2ff;
    border: 1px solid #cfe6ff;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.2s ease;
  }
  .copy:hover {
    background: #d6e7ff;
  }
  .native-time-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
    align-items: center;
  }
  input[type="time"] {
    padding: 8px;
    border-radius: 8px;
    border: 1px solid var(--border);
    font-size: 16px;
    cursor: pointer;
  }
  @media (max-width: 520px) {
    .time-row {
      flex-direction: column;
      align-items: stretch;
    }
    .time-block {
      width: 100%;
    }
    .native-time-container {
      align-items: stretch;
    }
  }
</style>
</head>
<body>
  <div class="card" role="application" aria-labelledby="title">
    <h1 id="title">CRACKED DOOR 8888/0000</h1>

    <div class="time-row" aria-hidden="false">
      <!-- Hours -->
      <div class="time-block" id="hours-block">
        <div class="label">Hours</div>
        <div class="big">
          <div class="part">
            <div class="controls" aria-hidden="true">
              <button class="btn small" id="h-up" title="Increase hours">▲</button>
            </div>
            <div class="unit" id="hours" tabindex="0" role="spinbutton" aria-valuemin="0" aria-valuemax="23" aria-label="Hours">12</div>
            <div class="controls" aria-hidden="true">
              <button class="btn small" id="h-down" title="Decrease hours">▼</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Minutes -->
      <div class="time-block" id="mins-block">
        <div class="label">Minutes</div>
        <div class="big">
          <div class="part">
            <div class="controls" aria-hidden="true">
              <button class="btn small" id="m-up" title="Increase minutes">▲</button>
            </div>
            <div class="unit" id="mins" tabindex="0" role="spinbutton" aria-valuemin="0" aria-valuemax="59" aria-label="Minutes">00</div>
            <div class="controls" aria-hidden="true">
              <button class="btn small" id="m-down" title="Decrease minutes">▼</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Native time input -->
      <div class="native-time-container">
        <div class="label">Quick Select</div>
        <input id="native-time" type="time" value="12:00">
        <button id="reset" class="copy" title="Reset to 12:00">Reset</button>
      </div>
    </div>

    <div class="calc" aria-live="polite">
      <div class="result" id="result">Result: <span id="result-number">...</span>
        <button id="copy-result" class="copy">Copy</button>
      </div>
    </div>
  </div>

<script>
(function(){
  const elH = document.getElementById('hours');
  const elM = document.getElementById('mins');
  const btnHup = document.getElementById('h-up');
  const btnHdown = document.getElementById('h-down');
  const btnMup = document.getElementById('m-up');
  const btnMdown = document.getElementById('m-down');
  const nativeTime = document.getElementById('native-time');
  const resetBtn = document.getElementById('reset');
  const resultEl = document.getElementById('result-number');
  const copyBtn = document.getElementById('copy-result');

  let hour = 12;
  let minute = 0;

  const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
  const pad2 = n => (n < 10 ? '0' + n : String(n));
  function renderTime() {
    elH.textContent = pad2(hour);
    elM.textContent = pad2(minute);
    nativeTime.value = pad2(hour) + ':' + pad2(minute);
    computeAndRender();
  }

  function computeAndRender() {
    const hhStr = pad2(hour);
    const ppStr = pad2(minute);
    const hhppStr = hhStr + ppStr;
    const hhpp = Number(hhppStr);
    const x = 9999 - hhpp;
    const sq = x * x;
    let out = sq.toString().replace(/[.,]/g, '');
    resultEl.textContent = out;
  }

  function incHour(delta) {
    hour = clamp((hour + delta + 24) % 24, 0, 23);
    renderTime();
  }
  function incMin(delta) {
    minute = minute + delta;
    while (minute < 0) { minute += 60; hour = (hour - 1 + 24) % 24; }
    while (minute >= 60) { minute -= 60; hour = (hour + 1) % 24; }
    hour = clamp(hour, 0, 23);
    renderTime();
  }

  btnHup.addEventListener('click', () => incHour(1));
  btnHdown.addEventListener('click', () => incHour(-1));
  btnMup.addEventListener('click', () => incMin(1));
  btnMdown.addEventListener('click', () => incMin(-1));
  resetBtn.addEventListener('click', () => { hour = 12; minute = 0; renderTime(); });

  nativeTime.addEventListener('input', (e) => {
    const v = e.target.value;
    if (!v) return;
    const [hh, mm] = v.split(':').map(s => parseInt(s, 10) || 0);
    hour = clamp(hh, 0, 23);
    minute = clamp(mm, 0, 59);
    renderTime();
  });

  function attachSpinBehavior(el, type) {
    el.addEventListener('keydown', (ev) => {
      if (ev.key === 'ArrowUp') { ev.preventDefault(); if (type === 'h') incHour(1); else incMin(1); }
      else if (ev.key === 'ArrowDown') { ev.preventDefault(); if (type === 'h') incHour(-1); else incMin(-1); }
      else if (ev.key === 'PageUp') { ev.preventDefault(); if (type === 'h') incHour(5); else incMin(5); }
      else if (ev.key === 'PageDown') { ev.preventDefault(); if (type === 'h') incHour(-5); else incMin(-5); }
      else if (ev.key === 'Home') { ev.preventDefault(); if (type === 'h') { hour = 0; } else { minute = 0; } renderTime(); }
      else if (ev.key === 'End') { ev.preventDefault(); if (type === 'h') { hour = 23; } else { minute = 59; } renderTime(); }
    });

    el.addEventListener('wheel', (ev) => {
      ev.preventDefault();
      const delta = (ev.deltaY < 0) ? 1 : -1;
      if (type === 'h') incHour(delta);
      else incMin(delta);
    }, { passive: false });
  }

  attachSpinBehavior(elH, 'h');
  attachSpinBehavior(elM, 'm');

  function attachDrag(el, type) {
    let dragging = false;
    let startY = 0;
    let startVal = 0;
    const sensitivity = 0.05;

    function onDown(e) {
      dragging = true;
      startY = (e.touches ? e.touches[0].clientY : e.clientY);
      startVal = (type === 'h') ? hour : minute;
      el.classList.add('dragging');
      document.body.style.cursor = 'ns-resize';
      e.preventDefault();
    }
    function onMove(e) {
      if (!dragging) return;
      const y = (e.touches ? e.touches[0].clientY : e.clientY);
      const dy = startY - y;
      const deltaUnits = Math.round(dy * sensitivity);
      if (type === 'h') {
        const nv = ((startVal + deltaUnits) % 24 + 24) % 24;
        hour = nv;
      } else {
        let total = startVal + deltaUnits;
        while (total < 0) { total += 60; hour = (hour - 1 + 24) % 24; }
        while (total >= 60) { total -= 60; hour = (hour + 1) % 24; }
        minute = clamp(total, 0, 59);
      }
      renderTime();
    }
    function onUp() {
      dragging = false;
      el.classList.remove('dragging');
      document.body.style.cursor = '';
    }

    el.addEventListener('mousedown', onDown);
    el.addEventListener('touchstart', onDown, { passive: false });
    window.addEventListener('mousemove', onMove);
    window.addEventListener('touchmove', onMove, { passive: false });
    window.addEventListener('mouseup', onUp);
    window.addEventListener('touchend', onUp);
  }

  attachDrag(elH, 'h');
  attachDrag(elM, 'm');

  function attachDirectEdit(el, type) {
    el.addEventListener('dblclick', () => {
      const cur = (type === 'h') ? hour : minute;
      const v = prompt(`Enter ${type === 'h' ? 'hours (0-23)' : 'minutes (0-59)'}:`, String(cur));
      if (v === null) return;
      const n = parseInt(v.replace(/[^\d-]/g, ''), 10);
      if (Number.isNaN(n)) return;
      if (type === 'h') { hour = clamp(n, 0, 23); } else { minute = clamp(n, 0, 59); }
      renderTime();
    });
  }
  attachDirectEdit(elH, 'h');
  attachDirectEdit(elM, 'm');

  copyBtn.addEventListener('click', async () => {
    const text = resultEl.textContent || '';
    try {
      await navigator.clipboard.writeText(text);
      copyBtn.textContent = 'Copied';
      setTimeout(() => copyBtn.textContent = 'Copy', 1000);
    } catch (e) {
      const ta = document.createElement('textarea');
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      try { document.execCommand('copy'); copyBtn.textContent = 'Copied'; setTimeout(() => copyBtn.textContent = 'Copy', 1000); }
      finally { document.body.removeChild(ta); }
    }
  });

  hour = 12;
  minute = 0;
  renderTime();

  window._timepick = { get hour() { return hour }, get minute() { return minute } };
})();
</script>

</body>
</html>
